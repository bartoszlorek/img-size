!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.imgSize=t()}(this,function(){"use strict";var e=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable;function i(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var r=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(e){i[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(e){return!1}}()?Object.assign:function(r,o){for(var s,a,l=i(r),c=1;c<arguments.length;c++){for(var u in s=Object(arguments[c]))t.call(s,u)&&(l[u]=s[u]);if(e){a=e(s);for(var d=0;d<a.length;d++)n.call(s,a[d])&&(l[a[d]]=s[a[d]])}}return l};function o(e){return null==e?[]:void 0!==e.length?Array.prototype.slice.call(e):[e]}function s(e,t){if(null!=e&&null!=t)if(e.complete)t(e,e.naturalWidth,e.naturalHeight);else{var n=e.src||e;if("string"!=typeof n)return;var i=new Image;i.onload=function(){t(e,i.naturalWidth,i.naturalHeight)},i.src=n}}var a="data-img-size",l="\n    position: absolute;\n    left: 50%; top: 50%;\n    -webkit-transform: translate(-50%,-50%);\n        -ms-transform: translate(-50%,-50%);\n            transform: translate(-50%,-50%);",c=function(e){return["."+e.container+"{\n        position: relative;\n        overflow: hidden;\n    }","."+e.horizontal+"{\n        "+l+"\n        width: 100%;\n        height: auto;\n    }","."+e.vertical+"{\n        "+l+"\n        width: auto;\n        height: 100%;\n    }"]};function u(e){var t,n=document.createElement("style");return document.head.appendChild(n),t=n.sheet,c(e).forEach(function(e,n){t.insertRule(e,n)}),n.setAttribute(a,""),n}"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var d,f=(function(e,t){var n;n=function(){return function(){function e(){var e,t;this.q=[],this.add=function(e){this.q.push(e)},this.call=function(){for(e=0,t=this.q.length;t>e;e++)this.q[e].call()}}function t(e,t){return e.currentStyle?e.currentStyle[t]:window.getComputedStyle?window.getComputedStyle(e,null).getPropertyValue(t):e.style[t]}function n(n,r){if(n.resizedAttached){if(n.resizedAttached)return void n.resizedAttached.add(r)}else n.resizedAttached=new e,n.resizedAttached.add(r);n.resizeSensor=document.createElement("div"),n.resizeSensor.className="resize-sensor";var o="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden; opacity: 0;",s="position: absolute; left: 0; top: 0; transition: 0s;";n.resizeSensor.style.cssText=o,n.resizeSensor.innerHTML='<div class="resize-sensor-expand" style="'+o+'"><div style="'+s+'"></div></div><div class="resize-sensor-shrink" style="'+o+'"><div style="'+s+' width: 200%; height: 200%"></div></div>',n.appendChild(n.resizeSensor),"static"==t(n,"position")&&(n.style.position="relative");var a=n.resizeSensor.childNodes[0],l=a.childNodes[0],c=n.resizeSensor.childNodes[1],u=function(){l.style.width=1e5+"px",l.style.height=1e5+"px",a.scrollLeft=1e5,a.scrollTop=1e5,c.scrollLeft=1e5,c.scrollTop=1e5};u();var d=!1,f=function(){n.resizedAttached&&(d&&(n.resizedAttached.call(),d=!1),i(f))};i(f);var h,p,m,v,g=function(){((m=n.offsetWidth)!=h||(v=n.offsetHeight)!=p)&&(d=!0,h=m,p=v),u()},y=function(e,t,n){e.attachEvent?e.attachEvent("on"+t,n):e.addEventListener(t,n)};y(a,"scroll",g),y(c,"scroll",g)}var i=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){return window.setTimeout(e,20)},r=function(e,t){var i=Object.prototype.toString.call(e),r=this._isCollectionTyped="[object Array]"===i||"[object NodeList]"===i||"[object HTMLCollection]"===i||"undefined"!=typeof jQuery&&e instanceof window.jQuery||"undefined"!=typeof Elements&&e instanceof window.Elements;if(this._element=e,r)for(var o=0,s=e.length;s>o;o++)n(e[o],t);else n(e,t)};return r.prototype.detach=function(){var e=this._isCollectionTyped,t=this._element;if(e)for(var n=0,i=t.length;i>n;n++)r.detach(t[n]);else r.detach(t)},r.detach=function(e){e.resizeSensor&&(e.removeChild(e.resizeSensor),delete e.resizeSensor,delete e.resizedAttached)},r}()},e.exports=n()}(d={exports:{}},d.exports),d.exports);function h(e,t){e.classList?e.classList.add(t):m(e,t)||(e.className+=" "+t)}function p(e,t){if(e.classList)e.classList.remove(t);else if(m(e,t)){var n=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(n," ")}}function m(e,t){return e.classList?e.classList.contains(t):!!(e.className.indexOf(t)>-1)}function v(e,t){if("string"==typeof t)h(e,t);else for(var n=-1,i=t.length||0;++n<i;)h(e,t[n])}function g(e,t){if("string"==typeof t)p(e,t);else for(var n=-1,i=t.length||0;++n<i;)p(e,t[n])}var y=function(e){return function(t){return e((n=t,i=t.parentElement,r=n.naturalWidth/n.naturalHeight,o=i.clientHeight*r,s=i.clientWidth/r,{width:i.clientWidth-o,height:i.clientHeight-s}));var n,i,r,o,s}},w=y(function(e){return e.width>e.height}),b=y(function(e){return e.width<e.height});function z(e,t){var n=e.element,i=t.horizontal,r=t.vertical,o=(m(n,t.cover)?w:b)(n)?i:r;m(n,o)||(g(n,o!==i?i:r),v(n,o))}function j(e,t){var n={element:e,handler:new f(e.parentElement,function(){return z(n,t)})};return v(e.parentElement,t.container),n}function E(e,t){g(e.element.parentElement,t.container),g(e.element,[t.horizontal,t.vertical]),e.handler.detach(),e.handler=null,e.element=null}var S={container:"img-size-container",horizontal:"img-size-h",vertical:"img-size-v",contain:"img-size-contain",cover:"img-size-cover"};return function(e){var t=r({},S,e),n=u(t),i=[],a=function(e){i.push(j(e,t))},l=function(e){i=i.filter(function(n){return n.element!==e||E(n,t)})},c=function(){if(null===i)throw new Error("This ImgSize instance has been destroyed, so no operations can be performed on it.");return!0},d={attach:function(e){return c(),o(e).forEach(function(e){s(e,a)}),d},detach:function(e){return c(),o(e).forEach(l),d},destroy:function(){return document.head.removeChild(n),i.forEach(function(e){return E(e,t)}),i=null,n=null,null}};return d}});
