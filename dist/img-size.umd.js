!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):e.imgSize=n()}(this,function(){"use strict";var e=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable;function r(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var i=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var n={},t=0;t<10;t++)n["_"+String.fromCharCode(t)]=t;if("0123456789"!==Object.getOwnPropertyNames(n).map(function(e){return n[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(i,o){for(var s,c,l=r(i),a=1;a<arguments.length;a++){for(var u in s=Object(arguments[a]))n.call(s,u)&&(l[u]=s[u]);if(e){c=e(s);for(var f=0;f<c.length;f++)t.call(s,c[f])&&(l[c[f]]=s[c[f]])}}return l};function o(e){return null==e?[]:void 0!==e.length?Array.prototype.slice.call(e):[e]}function s(e,n){if(null!=e&&null!=n)if(e.complete)n(e,e.naturalWidth,e.naturalHeight);else{var t=e.src||e;if("string"!=typeof t)return;var r=new Image;r.onload=function(){n(e,r.naturalWidth,r.naturalHeight)},r.src=t}}function c(e,n,t){null!=e&&(e.addEventListener?e.addEventListener(n,t,!1):e.attachEvent("on"+n,function(){return t.call(e,window.event)}))}function l(e,n,t){null!=e&&(e.removeEventListener?e.removeEventListener(n,t):e.detachEvent("on"+n,t))}function a(e,n){return null!=e?function(){return e.map(function(e){return n[e]()})}:function(){return null}}function u(e,n){var t={};return Object.keys(e).forEach(function(r){var i=[],o=e[r],s=o.type,c=a(o.args,n),l={type:s,subscribers:[],publisher:function(e){var n=l.subscribers.length,t=c();if(!0!==e&&null!==t){var r=t.some(function(e,n){return i[n]!==e});if(i=t,!r)return!1}for(var o=-1;++o<n;)l.subscribers[o].apply(null,t)}};t[r]=l}),t}function f(e,n){var t=function(e){var t=e.type,r=e.publisher;t.forEach(function(e){return n(e,r)})};return{add:function(n,t){var r,i,o;-1===n.subscribers.indexOf(t)&&(n.subscribers.push(t),1===n.subscribers.length&&(i=(r=n).type,o=r.publisher,i.forEach(function(n){return e(n,o)})))},remove:function(e,n){var r=e.subscribers.indexOf(n);r>-1&&(e.subscribers.splice(r,1),e.subscribers.length||t(e))},removeAll:function(e){e.subscribers=[],t(e)}}}var d={load:{type:["load"]},unload:{type:["beforeunload"]},resize:{type:["resize","scroll","orientationchange"],args:["width","height"]},scroll:{type:["scroll"],args:["scrollX","scrollY"]}},h={width:function(){return window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth},height:function(){return window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight},scrollX:function(){return window.scrollX||window.pageXOffset},scrollY:function(){return window.scrollY||window.pageYOffset}};var v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,n=u(d,h),t=function(e){if(!n[e])throw new Error("The '"+e+"' is not a valid event name.");return n[e]},r=f(c.bind(null,e),l.bind(null,e)),i={on:function(e,n){var o=t(e);return"function"==typeof n&&r.add(o,n),i},off:function(e,o){if(void 0===e)Object.keys(n).forEach(function(e){r.removeAll(n[e])});else{var s=t(e);"function"==typeof o?r.remove(s,o):void 0===o&&r.removeAll(s)}return i},trigger:function(e){return t(e).publisher(!0),i}};return Object.keys(h).forEach(function(e){i[e]=h[e]}),i},p="data-img-size",m="\n    position: absolute;\n    left: 50%; top: 50%;\n    -webkit-transform: translate(-50%,-50%);\n        -ms-transform: translate(-50%,-50%);\n            transform: translate(-50%,-50%);",g=function(e){return["."+e.container+"{\n        position: relative;\n        overflow: hidden;\n    }","."+e.horizontal+"{\n        "+m+"\n        width: 100%;\n        height: auto;\n    }","."+e.vertical+"{\n        "+m+"\n        width: auto;\n        height: 100%;\n    }"]};function b(e){var n,t=document.createElement("style");return document.head.appendChild(t),n=t.sheet,g(e).forEach(function(e,t){n.insertRule(e,t)}),t.setAttribute(p,""),t}"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var y,w=(function(e,n){var t;t=function(){return function(){function e(){var e,n;this.q=[],this.add=function(e){this.q.push(e)},this.call=function(){for(e=0,n=this.q.length;n>e;e++)this.q[e].call()}}function n(e,n){return e.currentStyle?e.currentStyle[n]:window.getComputedStyle?window.getComputedStyle(e,null).getPropertyValue(n):e.style[n]}function t(t,i){if(t.resizedAttached){if(t.resizedAttached)return void t.resizedAttached.add(i)}else t.resizedAttached=new e,t.resizedAttached.add(i);t.resizeSensor=document.createElement("div"),t.resizeSensor.className="resize-sensor";var o="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden; opacity: 0;",s="position: absolute; left: 0; top: 0; transition: 0s;";t.resizeSensor.style.cssText=o,t.resizeSensor.innerHTML='<div class="resize-sensor-expand" style="'+o+'"><div style="'+s+'"></div></div><div class="resize-sensor-shrink" style="'+o+'"><div style="'+s+' width: 200%; height: 200%"></div></div>',t.appendChild(t.resizeSensor),"static"==n(t,"position")&&(t.style.position="relative");var c=t.resizeSensor.childNodes[0],l=c.childNodes[0],a=t.resizeSensor.childNodes[1],u=function(){l.style.width=1e5+"px",l.style.height=1e5+"px",c.scrollLeft=1e5,c.scrollTop=1e5,a.scrollLeft=1e5,a.scrollTop=1e5};u();var f=!1,d=function(){t.resizedAttached&&(f&&(t.resizedAttached.call(),f=!1),r(d))};r(d);var h,v,p,m,g=function(){((p=t.offsetWidth)!=h||(m=t.offsetHeight)!=v)&&(f=!0,h=p,v=m),u()},b=function(e,n,t){e.attachEvent?e.attachEvent("on"+n,t):e.addEventListener(n,t)};b(c,"scroll",g),b(a,"scroll",g)}var r=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){return window.setTimeout(e,20)},i=function(e,n){var r=Object.prototype.toString.call(e),i=this._isCollectionTyped="[object Array]"===r||"[object NodeList]"===r||"[object HTMLCollection]"===r||"undefined"!=typeof jQuery&&e instanceof window.jQuery||"undefined"!=typeof Elements&&e instanceof window.Elements;if(this._element=e,i)for(var o=0,s=e.length;s>o;o++)t(e[o],n);else t(e,n)};return i.prototype.detach=function(){var e=this._isCollectionTyped,n=this._element;if(e)for(var t=0,r=n.length;r>t;t++)i.detach(n[t]);else i.detach(n)},i.detach=function(e){e.resizeSensor&&(e.removeChild(e.resizeSensor),delete e.resizeSensor,delete e.resizedAttached)},i}()},e.exports=t()}(y={exports:{}},y.exports),y.exports);function z(e,n){e.classList?e.classList.add(n):j(e,n)||(e.className+=" "+n)}function E(e,n){if(e.classList)e.classList.remove(n);else if(j(e,n)){var t=new RegExp("(\\s|^)"+n+"(\\s|$)");e.className=e.className.replace(t," ")}}function j(e,n){return e.classList?e.classList.contains(n):!!(e.className.indexOf(n)>-1)}function O(e,n){if("string"==typeof n)z(e,n);else for(var t=-1,r=n.length||0;++t<r;)z(e,n[t])}function S(e,n){if("string"==typeof n)E(e,n);else for(var t=-1,r=n.length||0;++t<r;)E(e,n[t])}var A=function(e){return function(n){return e((t=n,r=n.parentElement,i=t.naturalWidth/t.naturalHeight,o=r.clientHeight*i,s=r.clientWidth/i,{width:r.clientWidth-o,height:r.clientHeight-s}));var t,r,i,o,s}},L=A(function(e){return e.width>e.height}),x=A(function(e){return e.width<e.height});function C(e,n){var t=e.element,r=n.horizontal,i=n.vertical,o=(j(t,n.cover)?L:x)(t)?r:i;j(t,o)||(S(t,o!==r?r:i),O(t,o))}function H(e,n){var t={element:e};return n.accurate&&(t.handler=new w(e.parentElement,function(){C(t,n)})),O(e.parentElement,n.container),C(t,n),t}function N(e,n){S(e.element.parentElement,n.container),S(e.element,[n.horizontal,n.vertical]),e.element=null,n.accurate&&(e.handler.detach(),e.handler=null)}var T={accurate:!1,container:"img-size-container",horizontal:"img-size-h",vertical:"img-size-v",contain:"img-size-contain",cover:"img-size-cover"},k=null;return function(e){var n=i({},T,e),t=b(n),r=[],c=function(e){r.push(H(e,n))},l=function(e){r=r.filter(function(t){return t.element!==e||N(t,n)})},a=function(){for(var e=-1,t=r.length;++e<t;)C(r[e],n)},u=function(){if(null===r)throw new Error("This ImgSize instance has been destroyed, so no operations can be performed on it.");return!0};n.accurate||(null===k&&(k=v()),k.on("resize",a));var f={attach:function(e){return u(),o(e).forEach(function(e){s(e,c)}),f},detach:function(e){return u(),o(e).forEach(l),f},update:function(){return u(),a(),f},destroy:function(){return n.accurate||k.off("resize",a),document.head.removeChild(t),r.forEach(function(e){N(e,n)}),r=null,t=null,null}};return f}});
