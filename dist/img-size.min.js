"use strict";var n=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,e=Object.prototype.propertyIsEnumerable;function r(n){if(null===n||void 0===n)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(n)}function i(){try{if(!Object.assign)return!1;var n=new String("abc");if(n[5]="de","5"===Object.getOwnPropertyNames(n)[0])return!1;for(var t={},e=0;e<10;e++)t["_"+String.fromCharCode(e)]=e;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(n){return t[n]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(n){r[n]=n}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(n){return!1}}var o=i()?Object.assign:function(i,o){for(var u,a,c=r(i),s=1;s<arguments.length;s++){for(var l in u=Object(arguments[s]))t.call(u,l)&&(c[l]=u[l]);if(n){a=n(u);for(var f=0;f<a.length;f++)e.call(u,a[f])&&(c[a[f]]=u[a[f]])}}return c};function u(n){return null==n?[]:void 0!==n.length?Array.prototype.slice.call(n):[n]}function a(n,t){if(null!=n&&null!=t)if(n.complete)t(n,n.naturalWidth,n.naturalHeight);else{var e=n.src||n;if("string"!=typeof e)return;var r=new Image;r.onload=function(){t(n,r.naturalWidth,r.naturalHeight)},r.src=e}}function c(n,t,e){null!=n&&(n.addEventListener?n.addEventListener(t,e,!1):n.attachEvent("on"+t,function(){return e.call(n,window.event)}))}function s(n,t,e){null!=n&&(n.removeEventListener?n.removeEventListener(t,e):n.detachEvent("on"+t,e))}function l(n,t){if(null!=n)if("function"==typeof Event)n.dispatchEvent(new Event(t));else if(n.document){var e=n.document.createEvent("UIEvents");e.initUIEvent(t,!0,!1,n,0),n.dispatchEvent(e)}}function f(n,t){return null!=n?function(e){var r=n.map(function(n){return t[n]()});return r.unshift(e),r}:function(n){return[n]}}function h(n,t,e){var r=null==n?0:n.length;if(r!==(null==t?0:t.length))return!1;for(var i=void 0!==e?e-1:-1;++i<r;)if(n[i]!==t[i])return!1;return!0}var d=function(n){if(Array.isArray(n)){for(var t=0,e=Array(n.length);t<n.length;t++)e[t]=n[t];return e}return Array.from(n)};function v(n,t,e){this.items=null!=n?[].concat(d(n)):[],this.loaded=t||null,this.unloaded=e||null}function m(n){return function(t,e){var r=[],i=f(t.args,e),o={type:t.type,subscribers:new v(null,function(){return e=(t=o).type,r=t.publisher,void e.forEach(function(t){n.addEventListener(n.view,t,r)});var t,e,r},function(){return e=(t=o).type,r=t.publisher,void e.forEach(function(t){n.removeEventListener(n.view,t,r)});var t,e,r}),publisher:function(n){var t=i(n),e=void 0;if(t.length>1){var u=!h(r,t,1);if(r=t,!u)return!1}return o.subscribers.forEach(function(n){e=n.apply(null,t)}),void 0!==e&&(n.returnValue=e),e},clearCache:function(){return r=[],o}};return o}}function p(n,t){var e={};return Object.keys(t).forEach(function(r){e[r]=function(){return t[r](n,n.document)}}),e}v.prototype={get length(){return this.items.length},add:function(n){-1===this.items.indexOf(n)&&(this.items.push(n),this.loaded&&1===this.items.length&&this.loaded(this))},remove:function(n){var t=this.items.indexOf(n);t>-1&&(this.items.splice(t,1),this.unloaded&&!this.items.length&&this.unloaded(this))},empty:function(){this.items=[],this.unloaded&&this.unloaded(this)},forEach:function(n){for(var t=-1,e=this.items.length;++t<e;)if(!1===n(this.items[t],t,this.items))return}};var g={load:{type:["load"]},unload:{type:["beforeunload"]},resize:{type:["resize","scroll","orientationchange"],args:["width","height"]},scroll:{type:["scroll"],args:["scrollX","scrollY"]}},y={width:function(n,t){return n.innerWidth||t.documentElement.clientWidth||t.body.clientWidth},height:function(n,t){return n.innerHeight||t.documentElement.clientHeight||t.body.clientHeight},scrollX:function(n,t){return n.scrollX||n.pageXOffset},scrollY:function(n,t){return n.scrollY||n.pageYOffset}};function b(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,t=p(n,y),e={},r=m({addEventListener:c,removeEventListener:s,view:n});Object.keys(g).forEach(function(n){e[n]=r(g[n],t)});var i=function(n){if(!e[n])throw new Error("'"+n+"' is not a valid event name");return e[n]},o={on:function(n,t){var e=i(n);return"function"==typeof t&&e.subscribers.add(t),o},off:function(n,t){if(void 0===n)Object.keys(e).forEach(function(n){e[n].subscribers.empty()});else{var r=i(n);"function"==typeof t?r.subscribers.remove(t):void 0===t&&r.subscribers.empty()}return o},trigger:function(t){var e=i(t).clearCache();return l(n,e.type[0]),o}};return Object.keys(t).forEach(function(n){o[n]=t[n]}),o}var E=b,w="data-img-size",O="\n    position: absolute;\n    left: 50%; top: 50%;\n    -webkit-transform: translate(-50%,-50%);\n        -ms-transform: translate(-50%,-50%);\n            transform: translate(-50%,-50%);",j=function(n){return["."+n.container+"{\n        position: relative;\n        overflow: hidden;\n    }","."+n.horizontal+"{\n        "+O+"\n        width: 100%;\n        height: auto;\n    }","."+n.vertical+"{\n        "+O+"\n        width: auto;\n        height: 100%;\n    }"]};function z(n,t){t.forEach(function(t,e){n.insertRule(t,e)})}function L(n){var t=document.createElement("style");return document.head.appendChild(t),z(t.sheet,j(n)),t.setAttribute(w,""),t}var k=function(n){return"string"==typeof n?n.split(/\s+/):n||[]};function H(n,t){return n.classList?n.classList.contains(t):!!(n.className.indexOf(t)>-1)}function W(n,t){var e=k(t);if(n.classList)n.classList.add.apply(null,e);else{for(var r=n.className,i=0;i<e.length;i++)r.indexOf(e[i])<0&&(r+=" "+e[i]);n.className=r}}function N(n,t){var e=k(t);if(n.classList)n.classList.remove.apply(null,e);else{for(var r=k(n.className),i="",o=0;o<r.length;o++)e.indexOf(r[o])<0&&(i+=" "+r[o]);n.className=i.substring(1)}}function x(n,t){var e=n.naturalWidth/n.naturalHeight,r=t.clientHeight*e,i=t.clientWidth/e;return{width:t.clientWidth-r,height:t.clientHeight-i}}var A=function(n){return function(t){return n(x(t,t.parentElement))}},C=A(function(n){return n.width>n.height}),I=A(function(n){return n.width<n.height});function P(n,t){var e=t.horizontal,r=t.vertical,i=(H(n,t.cover)?C:I)(n),o=i?e:r;H(n,o)||(N(n,i?r:e),W(n,o))}function S(n,t){return W(n.parentElement,t.container),P(n,t),n}function X(n,t){return N(n.parentElement,t.container),N(n,[t.horizontal,t.vertical]),null}var Y={container:"img-size-container",horizontal:"img-size-h",vertical:"img-size-v",contain:"img-size-contain",cover:"img-size-cover"},q=E();function T(n){var t=o({},Y,n),e=L(t),r=[],i=function(n){r.push(S(n,t))},c=function(n){r=r.filter(function(e){return e!==n||X(n,t)})},s=function(){for(var n=-1,e=r.length;++n<e;)P(r[n],t)},l=function(){if(null===r)throw new Error("This ImgSize instance has been destroyed, so no operations can be performed on it.");return!0};q.on("resize",s);var f={attach:function(n){return l(),u(n).forEach(function(n){a(n,i)}),f},detach:function(n){return l(),u(n).forEach(c),f},update:function(){return l(),s(),f},destroy:function(){return q.off("resize",s),document.head.removeChild(e),r.forEach(function(n){return X(n,t)}),r=null,e=null,null}};return f}module.exports=T;
